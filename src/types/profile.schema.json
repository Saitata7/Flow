{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "User Profile Schema",
  "description": "Schema for user profile data in the Flow app",
  "type": "object",
  "properties": {
    "id": {
      "type": "string",
      "description": "Unique user identifier"
    },
    "displayName": {
      "type": "string",
      "maxLength": 50,
      "description": "User's display name"
    },
    "avatarUrl": {
      "type": "string",
      "format": "uri",
      "description": "URL to user's avatar image"
    },
    "bio": {
      "type": "string",
      "maxLength": 500,
      "description": "User's bio/description"
    },
    "stats": {
      "type": "object",
      "properties": {
        "personalPlans": {
          "type": "integer",
          "minimum": 0,
          "description": "Number of personal plans"
        },
        "publicPlans": {
          "type": "integer",
          "minimum": 0,
          "description": "Number of public plans"
        },
        "followers": {
          "type": "integer",
          "minimum": 0,
          "description": "Number of followers"
        },
        "following": {
          "type": "integer",
          "minimum": 0,
          "description": "Number of users being followed"
        },
        "badges": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Array of earned badges"
        }
      },
      "required": ["personalPlans", "publicPlans", "followers", "following", "badges"],
      "additionalProperties": false
    },
    "social": {
      "type": "object",
      "properties": {
        "twitter": {
          "type": "string",
          "description": "Twitter handle or URL"
        },
        "linkedin": {
          "type": "string",
          "format": "uri",
          "description": "LinkedIn profile URL"
        },
        "github": {
          "type": "string",
          "format": "uri",
          "description": "GitHub profile URL"
        },
        "instagram": {
          "type": "string",
          "description": "Instagram handle"
        }
      },
      "additionalProperties": false
    },
    "visibility": {
      "type": "object",
      "properties": {
        "bio": {
          "type": "boolean",
          "description": "Whether bio is visible to others"
        },
        "stats": {
          "type": "boolean",
          "description": "Whether stats are visible to others"
        },
        "plans": {
          "type": "boolean",
          "description": "Whether plans are visible to others"
        }
      },
      "required": ["bio", "stats", "plans"],
      "additionalProperties": false
    },
    "schemaVersion": {
      "type": "integer",
      "description": "Schema version for migration purposes"
    },
    "createdAt": {
      "type": "string",
      "format": "date-time",
      "description": "Profile creation timestamp"
    },
    "updatedAt": {
      "type": "string",
      "format": "date-time",
      "description": "Profile last update timestamp"
    }
  },
  "required": [
    "id",
    "displayName",
    "avatarUrl",
    "bio",
    "stats",
    "social",
    "visibility",
    "schemaVersion",
    "createdAt",
    "updatedAt"
  ],
  "additionalProperties": false
}
