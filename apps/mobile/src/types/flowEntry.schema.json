{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Flow Entry",
  "type": "object",
  "properties": {
    "id": {
      "type": "string",
      "description": "Unique identifier for the flow entry"
    },
    "flowId": {
      "type": "string",
      "description": "ID of the parent flow"
    },
    "date": {
      "type": "string",
      "format": "date",
      "description": "Date of the flow entry"
    },
    "symbol": {
      "type": "string",
      "enum": ["✓", "✗", "+"],
      "description": "Status symbol for the flow entry"
    },
    "emotion": {
      "type": "string",
      "description": "Emotion associated with the flow entry"
    },
    "moodScore": {
      "type": "integer",
      "minimum": 1,
      "maximum": 5,
      "description": "Quantified mood score (1-5 scale)"
    },
    "note": {
      "type": "string",
      "description": "Note for the flow entry",
      "maxLength": 1000
    },
    "quantitative": {
      "type": "object",
      "properties": {
        "unitText": {
          "type": "string",
          "description": "Unit text for quantitative tracking"
        },
        "count": {
          "type": "number",
          "description": "Count value for quantitative tracking"
        }
      },
      "description": "Quantitative tracking data"
    },
    "timebased": {
      "type": "object",
      "properties": {
        "totalDuration": {
          "type": "number",
          "description": "Total duration in seconds"
        }
      },
      "description": "Time-based tracking data"
    },
    "device": {
      "type": "string",
      "enum": ["mobile", "web", "api"],
      "description": "Device/platform used to create the entry (useful for debugging + analytics)"
    },
    "geo": {
      "type": "object",
      "properties": {
        "lat": {
          "type": "number",
          "minimum": -90,
          "maximum": 90,
          "description": "Latitude coordinate"
        },
        "lng": {
          "type": "number",
          "minimum": -180,
          "maximum": 180,
          "description": "Longitude coordinate"
        },
        "accuracy": {
          "type": "number",
          "minimum": 0,
          "description": "Location accuracy in meters"
        }
      },
      "description": "Geographic location data (if location-enabled)",
      "additionalProperties": false
    },
    "streakCount": {
      "type": "integer",
      "minimum": 0,
      "description": "Current streak count (cached for leaderboard performance)"
    },
    "edited": {
      "type": "boolean",
      "description": "Whether this entry was edited"
    },
    "editedBy": {
      "type": "string",
      "description": "ID of the user who edited this entry"
    },
    "editedAt": {
      "type": "string",
      "format": "date-time",
      "description": "When this entry was edited"
    },
    "createdAt": {
      "type": "string",
      "format": "date-time",
      "description": "When this entry was created"
    },
    "updatedAt": {
      "type": "string",
      "format": "date-time",
      "description": "When this entry was last updated"
    },
    "deletedAt": {
      "type": ["string", "null"],
      "format": "date-time",
      "description": "When this entry was soft-deleted (null if not deleted)"
    },
    "timestamp": {
      "type": "string",
      "format": "date-time",
      "description": "Timestamp of the entry"
    },
    "schemaVersion": {
      "type": "integer",
      "description": "Version of the schema used"
    }
  },
  "required": ["id", "flowId", "date", "symbol", "schemaVersion", "createdAt", "updatedAt"],
  "additionalProperties": false
}
